<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Tracker</title>
</head>
<body>
    <div id="app">
        <h1>Expense Tracker</h1>
        
        <!-- Participants Setup -->
        <div id="participants-setup">
            <h2>Add Participants</h2>
            <input type="text" id="participant-name" placeholder="Participant Name">
            <button onclick="addParticipant()">Add Participant</button>
            <ul id="participant-list"></ul>
        </div>

        <!-- Expense Input Form -->
        <div id="expense-input">
            <h2>Add Expense</h2>
            <form id="expense-form">
                <label for="description">Description:</label>
                <input type="text" id="description" required>

                <label for="total-amount">Total Amount:</label>
                <input type="number" id="total-amount" step="0.01" required>

                <label for="currency">Currency:</label>
                <select id="currency">
                    <option value="GBP">£ GBP</option>
                    <option value="EUR">€ EUR</option>
                    <option value="HKD">$ HKD</option>
                </select>

                <label for="payer">Paid By:</label>
                <select id="payer"></select>

                <h3>Split Method</h3>
                <div>
                    <input type="radio" id="split-equal" name="split-method" value="equal" checked>
                    <label for="split-equal">Split Equally</label>
                    
                    <input type="radio" id="split-manual" name="split-method" value="manual">
                    <label for="split-manual">Manual Split</label>
                </div>

                <div id="split-details"></div>

                <button type="submit">Add Expense</button>
            </form>
        </div>

        <!-- Expense List -->
        <div id="expense-list">
            <h2>Expenses</h2>
            <table id="expenses-table">
                <thead>
                    <tr>
                        <th>Description</th>
                        <th>Amount</th>
                        <th>Payer</th>
                        <th>Split Method</th>
                    </tr>
                </thead>
                <tbody id="expenses-body"></tbody>
            </table>
        </div>

        <!-- Settlement Summary -->
        <div id="settlement-summary">
            <h2>Settlement Summary</h2>
            <div id="settlement-details"></div>
        </div>
    </div>

    <script>
        let participants = [];
        let expenses = [];

        function addParticipant() {
            const nameInput = document.getElementById('participant-name');
            const name = nameInput.value.trim();
            const participantList = document.getElementById('participant-list');
            const payerSelect = document.getElementById('payer');

            if (name && !participants.includes(name)) {
                participants.push(name);
                
                // Add to participant list
                const li = document.createElement('li');
                li.textContent = name;
                participantList.appendChild(li);

                // Add to payer dropdown
                const option = document.createElement('option');
                option.value = name;
                option.textContent = name;
                payerSelect.appendChild(option);

                // Clear input
                nameInput.value = '';
            }
        }

        document.getElementById('expense-form').addEventListener('submit', function(e) {
            e.preventDefault();
            // TODO: Implement expense submission logic
        });

        // Event listener for split method
        document.querySelectorAll('input[name="split-method"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const splitDetails = document.getElementById('split-details');
                splitDetails.innerHTML = '';

                if (this.value === 'manual') {
                    // Create manual split inputs for each participant
                    participants.forEach(participant => {
                        const div = document.createElement('div');
                        div.innerHTML = `
                            <label>${participant} pays:</label>
                            <input type="number" class="manual-split" 
                                   data-participant="${participant}" 
                                   step="0.01">
                        `;
                        splitDetails.appendChild(div);
                    });
                }
            });
        });
    </script>
</body>
</html>
